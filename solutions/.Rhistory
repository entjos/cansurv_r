# in legend of risk table
)
## Kaplan-Meier plot with risk table
## Load survminer
library(survminer)
ggsurvplot(
mfit,                      # survfit object.
risk.table = TRUE,         # show risk table.
conf.int = TRUE,           # show confidence intervals for
break.time.by = 20       , # numeric value controlling time axis breaks
risk.table.y.text.col = T, # colour risk table text annotations.
risk.table.y.text = FALSE  # show bars instead of names in text annotations
# in legend of risk table
)
## Adjust data & clean data
library(survival)
set.seed(0)
Data <- flchain
View(Data)
Data <- Data[!is.na(Data$creatinine),]
DATA <- Data[Data$End > Data$age,]
Data$End <- Data$age + Data$futime/365 ## age_exist is age+follow-up time (years)
DATA <- Data[Data$End > Data$age,]
names(DATA)[6] <- "FLC"
View(DATA)
Train = DATA[1:500,]
Test = DATA[1000:1020,]
library(LTRCtrees)
install.packages("LTRCtrees")
LTRCART.obj <- LTRCART(Surv(age, End, death) ~ sex + FLC + creatinine, Train)
library(LTRCtrees)
LTRCART.obj <- LTRCART(Surv(age, End, death) ~ sex + FLC + creatinine, Train)
LTRCIT.obj <- LTRCIT(Surv(age, End, death) ~ sex + FLC + creatinine, Train)
library(rpart.plot)
install.packages("rpart.plot")
library(rpart.plot)
prp(LTRCART.obj, roundint=FALSE)
plot(LTRCIT.obj)
library()
install.packages("partykit")
install.packages("partykit")
install.packages("partykit")
install.packages("partykit")
install.packages("partykit")
install.packages("partykit")
library(partykit)
LTRCART.obj.party <- as.party(LTRCART.obj)
LTRCART.obj.party$fitted[["(response)"]]<- Surv(Train$age, Train$End, Train$death)
plot(LTRCART.obj.party)
library(partykit)
LTRCART.obj.party <- as.party(LTRCART.obj)
LTRCART.obj.party$fitted[["(response)"]] <- Surv(Train$age, Train$End, Train$death)
LTRCART.obj <- LTRCART(Surv(age, End, death) ~ sex + FLC + creatinine, Train)
LTRCIT.obj <- LTRCIT(Surv(age, End, death) ~ sex + FLC + creatinine, Train)
library(LTRCtrees)
LTRCART.obj.party$fitted[["(response)"]] <- Surv(Train$age, Train$End, Train$death)
## Adjust data & clean data
library(survival)
set.seed(0)
## Since LTRCART uses cross-validation to prune the tree, specifying the seed
## guarantees that the results given here will be duplicated in other analyses
Data <- flchain
Data <- Data[!is.na(Data$creatinine),] ## Only keep non-missing
Data$End <- Data$age + Data$futime/365 ## age_exist is age+follow-up time (years)
DATA <- Data[Data$End > Data$age,]     ## Make sure end is >> age
names(DATA)[6] <- "FLC"                ## Just rename column 6
## Setup training set and test set
Train = DATA[1:500,]
Test = DATA[1000:1020,]
## Fit LTRCART and LTRCIT survival tree
library(LTRCtrees)
LTRCART.obj <- LTRCART(Surv(age, End, death) ~ sex + FLC + creatinine, Train)
LTRCIT.obj <- LTRCIT(Surv(age, End, death) ~ sex + FLC + creatinine, Train)
## Putting Surv(End, death) in formula would result an error message
## since both LTRCART and LTRCIT are expecting Surv(time1, time2, event)
## Plot the fitted LTRCART tree using rpart.plot function in rpart.plot[6] package
library(rpart.plot)
prp(LTRCART.obj, roundint=FALSE)
## Plot the fitted LTRCIT tree
plot(LTRCIT.obj)
library(partykit)
LTRCART.obj.party <- as.party(LTRCART.obj)
LTRCART.obj.party$fitted[["(response)"]] <- Surv(Train$age, Train$End, Train$death)
plot(LTRCART.obj.party)
LTRCIT.pred <- predict(LTRCIT.obj, newdata=Test, type = "response")
head(LTRCIT.pred)
LTRCIT.pred <- predict(LTRCIT.obj, newdata=Test, type = "prob")
head(LTRCIT.pred,2)
## Predict relative risk on test set
LTRCART.pred <- predict(LTRCART.obj, newdata=Test)
head(LTRCART.pred)
LTRCART.pred <- Pred.rpart(Surv(age, End, death) ~ sex + FLC + creatinine, Train, Test)
head(LTRCART.pred$KMcurves, 2)  ## list of predicted KM curves
head(LTRCART.pred$Medians)  ## vector of predicted median survival time
library(biostat3)
library(haven)
## Read data
melanoma <- read_dta("melanoma.dta") %>%
filter(stage=="Localised")
melanoma <- read_dta("melanoma.dta") %>%
filter(stage==1)
melanoma <- read_dta("melanoma.dta")
getwd()
getwd("~/cansurv_r/solutions")
setwd("~/cansurv_r/solutions")
melanoma <- read_dta("melanoma.dta") %>%
filter(stage==1)
melanoma <- read_dta("melanoma.dta")%>%
filter(stage==1)
melanoma <- read_dta("melanoma.dta")
melanoma <- melanoma %>%
filter(stage == 1)
melanoma <- filter(stage == 1)
melanoma <- read_dta("melanoma.dta") %>%
filter(stage == 1)
melanoma <- read_dta("melanoma.dta")%>%
filter(stage == 1)
melanoma <- melanoma %>% filter(stage == 1)
melanoma <- melanoma %>%
filter(stage == 1)
library(dplyr)
melanoma <- melanoma %>%
filter(stage == 1)
melanoma <- read_dta("melanoma.dta")%>%
filter(stage == 1)
mfityear8594 <- survfit(Surv(surv_mm, status==1) ~ year8594, data = melanoma)
plot(mfityear8594, col = 1:2,
xlab = "Follow-up Time",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomleft", levels(melanoma$year8594), col=1:2, lty = 1)
legend("bottomleft", levels(melanoma$year8594), col=1:2, lty = 1)
legend("bottomleft", legend=c(levels(as.factor(melanoma$year8594))), col=1:2, lty = 1)
legend("bottomleft", legend=c(levels(melanoma$year8594)), col=1:2, lty = 1)
legend("bottomleft", legend=c(levels(as.factor(melanoma$year8594))), col=1:2, lty = 1)
## subset of stage 1
melanoma <- read_dta("melanoma.dta")%>%
filter(stage == 1)%>%
mutate(year8594 = ifelse(year8594 == 1, "Diagnosed 85-94", " Diagnosed 75-84"))
mfityear8594 <- survfit(Surv(surv_mm, status==1) ~ year8594, data = melanoma)
plot(mfityear8594, col = 1:2,
xlab = "Follow-up Time",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomleft", legend=c(levels(as.factor(melanoma$year8594))), col=1:2, lty = 1)
## Read data
## subset of stage 1
melanoma <- read_dta("melanoma.dta")%>%
filter(stage == 1)%>%
mutate(year8594 = ifelse(year8594 == 1, "Diagnosed 85-94", "Diagnosed 75-84"))
#' stage (Clinical stage at diagnosis) is coded as follows
#' 0 [Unknown]
#' 1 [Localised]
#' 2 [Regional]
#' 3 [Distant]
#' status is coded as follows
#' 1 [Dead: cancer]
#' 2 [Dead: other]
#' 0 [Alive]
#' 4 [Lost to follow-up]
#' year8504 is coded as follows
#' 1 [Diagnosed 75-84]
#' 0 [Diagnosed 85-94]
##(a) Kaplan-Meier by calendar time
mfityear8594 <- survfit(Surv(surv_mm, status==1) ~ year8594, data = melanoma)
plot(mfityear8594, col = 1:2,
xlab = "Follow-up Time",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomleft", legend=c(levels(as.factor(melanoma$year8594))), col=1:2, lty = 1)
plot(muhaz2(Surv(surv_mm,status==1)~year8594, data=melanoma))
legend("topright")
plot(muhaz2(Surv(surv_mm,status==1)~year8594, data=melanoma))
legend("topright")
legend("topright", legend=c(levels(as.factor(melanoma$year8594))), col=1:2, lty = 1)
##(b) Hazard function
plot(muhaz2(Surv(surv_mm,status==1)~year8594, data=melanoma))
legend("topright", legend=c(levels(as.factor(melanoma$year8594))), col=1:2, lty = 1)
plot(muhaz2(Surv(surv_mm,status==1)~year8594, data=melanoma), legend=c(levels(as.factor(melanoma$year8594))))
plot(muhaz2(Surv(surv_mm,status==1)~year8594, data=melanoma), legend("topright", legend=c(levels(as.factor(melanoma$year8594))), col=1:2, lty = 1))
plot(muhaz2(Surv(surv_mm,status==1)~year8594, data=melanoma),
legend.args= NULL)
plot(muhaz2(Surv(surv_mm,status==1)~year8594, data=melanoma),
legend.args= NULL)
plot(muhaz2(Surv(surv_mm,status==1)~year8594, data=melanoma))
survdiff(Surv(surv_mm, status==1) ~ year8594, data=melanoma)
survdiff(Surv(surv_mm, status==1) ~ year8594, data=melanoma, rho=1)
##(d) Estimate mortality rates
survRate(Surv(surv_mm/1000, status==1)~year8594, data=melanoma)
survRate(Surv(surv_mm/1000, status==1)~agegrp, data=melanoma)
survRate(Surv(surv_mm/1000, status==1)~agegrp, data=melanoma)
mfit_agegrp <- survfit(Surv(surv_mm, death_cancer) ~ agegrp, data = melanoma)
plot(mfit_agegrp, col = 1:4,
xlab = "Months since diagnosis",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomleft", legend=c(levels(as.factor(levels(melanoma$agegrp)))), col=1:4, lty = 1)
mfit_agegrp <- survfit(Surv(surv_mm,  status==1) ~ agegrp, data = melanoma)
plot(mfit_agegrp, col = 1:4,
xlab = "Months since diagnosis",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomleft", legend=c(levels(as.factor(levels(melanoma$agegrp)))), col=1:4, lty = 1)
legend("bottomleft", legend=c(levels(as.factor(levels(melanoma$agegrp)))), col=1:4, lty = 1)
legend("bottomleft", legend=c(as.factor(levels(melanoma$agegrp))), col=1:4, lty = 1)
legend("bottomleft", legend=c(levels(as.factor(melanoma$agegrp))), col=1:4, lty = 1)
legend("bottomright", legend=c(levels(as.factor(melanoma$agegrp))), col=1:4, lty = 1)
plot(mfit_agegrp, col = 1:4,
xlab = "Months since diagnosis",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomright", legend=c(levels(as.factor(melanoma$agegrp))), col=1:4, lty = 1)
mfit_agegrp <- survfit(Surv(surv_mm,  status==1) ~ agegrp, data = melanoma)
plot(mfit_agegrp, col = 1:4,
xlab = "Months since diagnosis",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomright", legend=c(levels(as.factor(melanoma$agegrp))), col=1:4, lty = 1)
legend("bottomleft", legend=c(levels(as.factor(melanoma$agegrp))), col=1:4, lty = 1)
mfit_agegrp_year <- survfit(Surv(surv_mm/12, status==1) ~ agegrp, data = melanoma)
plot(mfit_agegrp_year, col = 1:4,
xlab = "Years since diagnosis",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomleft", legend=c(levels(as.factor(melanoma$agegrp))), col=1:4, lty = 1)
survRate(Surv(surv_mm/12/1000, status==1)~agegrp, data=melanoma)
survRate(Surv(surv_mm/1000, status==1)~agegrp, data=melanoma)
## Be aware of the unit: per 1000 person-years
survRate(Surv(surv_mm/12/1000, status==1)~agegrp, data=melanoma)
survRate(Surv(surv_mm/12/1000, status==1)~agegrp, data=melanoma)
mfit_sex <- survfit(Surv(surv_mm, status==1) ~ sex, data = melanoma)
plot(mfit_sex, col = 1:2,
xlab = "Months since diagnosis",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomright", legend=c(levels(as.factor(melanoma$sex))), col=1:2, lty = 1)
mfit_sex <- survfit(Surv(surv_mm, status==1) ~ sex, data = melanoma)
plot(mfit_sex, col = 1:2,
xlab = "Months since diagnosis",
ylab = "Survival",
main = "Kaplan-Meier survival estimates")
legend("bottomright", legend=c(levels(as.factor(melanoma$sex))), col=1:2, lty = 1)
plot(muhaz2(mfit_sex))
plot(muhaz2(Surv(surv_mm, status==1) ~ sex, data = melanoma))
survdiff(Surv(surv_mm, status==1) ~ sex, data=melanoma)
survdiff(Surv(surv_mm, status==1) ~ sex, data=melanoma)
survdiff(Surv(surv_mm/1000, status==1) ~ sex, data=melanoma)
survRate(Surv(surv_mm/1000, status==1) ~ sex, data=melanoma)
survdiff(Surv(surv_mm/1000, status==1) ~ sex, data=melanoma)
source('~/cansurv_r/solutions/q104.R', echo=TRUE)
source('~/cansurv_r/solutions/q104.R', echo=TRUE)
library(biostat3)
library(haven)
library(dplyr) # manipulate data
## Read data
## subset of stage 1
melanoma <- read_dta("melanoma.dta")%>%
filter(stage == 1)%>%
mutate(year8594 = ifelse(year8594 == 1, "Diagnosed 85-94", "Diagnosed 75-84"))
#' status is coded as follows
#' 1 [Dead: cancer]
#' 2 [Dead: other]
#' 0 [Alive]
#' 4 [Lost to follow-up]
## Plot Kaplan-Meier curve
kaplanmeier <- survfit(Surv(surv_mm, event = status == 1) ~ year8594,
data = melanoma)
plot(kaplanmeier,
mark.time=F,
xscale=12, # Turn months into years
xlab="Years since diagnosis",
ylab="S(t)",
col=c("blue","red"))
## Add legend too
legend("bottomleft",
legend=levels(melanoma$year8594),
col=c("blue","red"),
bty="n")
kaplanmeier <- survfit(Surv(surv_mm, event = status == 1) ~ year8594,
data = melanoma)
plot(kaplanmeier,
mark.time=F,
xscale=12, # Turn months into years
xlab="Years since diagnosis",
ylab="S(t)",
main = "Kaplan-Meier survival estimates",
col=c("blue","red"))
# legend
legend("bottomleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"),
bty="n")
legend("bottomleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=1:4, lty = 1)
legend("bottomleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=1:2, lty = 1)
legend("bottomleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
## Hazard function
plot(muhaz2(Surv(surv_mm/12, status == "Dead: cancer") ~ year8594, data=melanoma),
xlab="Years since diagnosis", col=c("blue","red"), lty=1:2)
plot(muhaz2(Surv(surv_mm/12, status == 1) ~ year8594, data=melanoma),
xlab="Years since diagnosis", col=c("blue","red"), lty=1:2)
plot(muhaz2(Surv(surv_mm/12, status == 1) ~ year8594, data=melanoma),
xlab="Years since diagnosis", col=c("blue","red"), lty=1:2)
plot(muhaz2(Surv(surv_mm/12, status == 1) ~ year8594, data=melanoma),
xlab="Years since diagnosis", col=c("blue","red"), lty=1:2)
legend("topleft")
hazard <- muhaz2(Surv(surv_mm/12, status == 1) ~ year8594, data=melanoma)
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"))
legend("topleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
hazard <- muhaz2(Surv(surv_mm/12, status == 1) ~ year8594, data=melanoma)
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"))
legend("topleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
hazard <- muhaz(Surv(surv_mm/12, status == 1) ~ year8594, data=melanoma)
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"))
legend("topleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"),
legend = FALSE)
legend("topleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
hazard <- muhaz2(Surv(surv_mm/12, status == 1) ~ year8594, data=melanoma)
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"),
legend = FALSE)
legend("topleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
hazard <- muhaz2(Surv(surv_mm/12, status == 1) ~ year8594, data=melanoma)
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"),
legend = FALSE)
legend("topright",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
hazard_plot<- plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"),
legend = FALSE)
legend("topright",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
## Plot K-M curve and hazard function in one plot
par(mfrow=c(1,2)) ## Two graphs in the same window
hazard_plot
##(a)-iii. Plot K-M curve and hazard function in one plot
par(mfrow=c(1,2)) ## Two graphs in the same window
# K-M
plot(kaplanmeier,
mark.time=F,
xscale=12, # Turn months into years
xlab="Years since diagnosis",
ylab="S(t)",
main = "Kaplan-Meier survival estimates",
col=c("blue","red"))
# legend
legend("bottomleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
# Hazard
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"),
legend = FALSE)
legend("topright",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
##(a)-iii. Plot K-M curve and hazard function in one plot
par(mfrow=c(1,2)) ## Two graphs in the same window
# K-M
plot(kaplanmeier,
mark.time=F,
xscale=12, # Turn months into years
xlab="Years since diagnosis",
ylab="S(t)",
main = "Kaplan-Meier survival estimates",
col=c("blue","red"))
# legend
legend("bottomleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
# Hazard
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"),
legend = FALSE)
legend("topright",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
par(mfrow=c(1,2)) ## Two graphs in the same window
# K-M
plot(kaplanmeier,
mark.time=F,
xscale=12, # Turn months into years
xlab="Years since diagnosis",
ylab="S(t)",
main = "Kaplan-Meier survival estimates",
col=c("blue","red"))
# legend
legend("bottomleft",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
# Hazard
plot(hazard,
xlab="Years since diagnosis",
ylab="Per person-years",
main = "Smoothed hazard estimates",
col=c("blue","red"),
legend = FALSE)
legend("topright",
legend=c(levels(as.factor(melanoma$year8594))),
col=c("blue","red"), lty = 1)
survRate(Surv(surv_mm,  status == 1) ~ year8594, data=melanoma)
survRate(Surv(surv_mm/12,  status == 1) ~ year8594, data=melanoma)
survRate(Surv(surv_mm/12/1000,  status == 1) ~ year8594, data=melanoma)
melanoma_10y <- mutate(melanoma,
status_10y = ifelse(surv_mm <= 120 & status == 1, 1, 0),
surv_mm = ifelse(surv_mm<=120, surv_mm, 120) # censored everyone after 120 months
)
survRate(Surv(surv_mm/12/1000, status_10y == 1) ~ year8594, data=melanoma_10y)
summary(Surv(surv_mm/12/1000,  status == 1) ~ year8594, data=melanoma)
summary(survfit(Surv(surv_mm/12/1000,  status == 1) ~ year8594, data=melanoma))
poisson_b <- glm( status == 1 ~ year8594 + offset( log( surv_mm/12/1000 ) ), family=poisson, data=melanoma)
summary(poisson_b)
eform(poisson_b)
poisson_c <- glm( status == 1 ~ year8594 + offset( log( surv_mm/12/1000 ) ), family=poisson, data=melanoma_10y)
summary(poisson_c)
eform(poisson_c)
survRate(Surv(surv_mm/12/1000, status_10y == 1) ~ year8594, data=melanoma_10y)
poisson_c <- glm( status == 1 ~ year8594 + offset( log( surv_mm/12/1000 ) ), family=poisson, data=melanoma_10y)
summary(poisson_c)
eform(poisson_c)
poisson_c <- glm( status == 1 ~ year8594 + offset( log( surv_mm/12 ) ), family=poisson, data=melanoma_10y)
summary(poisson_c)
eform(poisson_c)
survRate(Surv(surv_mm/12/1000, status_10y == 1) ~ year8594, data=melanoma_10y)
27.778/31.453
27.778/31.453
melanoma_10y <- mutate(melanoma,
status_10y = ifelse(surv_mm <= 120 & status == 1, 1, 0),
surv_mm = ifelse(surv_mm<=120, surv_mm, 120) # censored everyone after 120 months
)
survRate(Surv(surv_mm/12/1000, status_10y == 1) ~ year8594, data=melanoma_10y)
# Calculate by hand the ratio (85-94 to 75-84)
27.778/31.453 # 0.883159
poisson_c <- glm( status == 1 ~ year8594 + offset( log( surv_mm/12 ) ), family=poisson, data=melanoma_10y)
summary(poisson_c)
eform(poisson_c)
poisson_c <- glm( status == 1 ~ year8594 + offset( log( surv_mm/12/1000  ) ), family=poisson, data=melanoma_10y)
summary(poisson_c)
eform(poisson_c)
poisson_c <- glm( status == 1 ~ year8594 + offset( log( surv_mm/1000  ) ), family=poisson, data=melanoma_10y)
summary(poisson_c)
eform(poisson_c)
poisson_c <- glm( status == 1 ~ year8594 + offset( log( surv_mm  ) ), family=poisson, data=melanoma_10y)
summary(poisson_c)
summary(poisson_c)
eform(poisson_c)
poisson_c <- glm( status == 1 ~ year8594 + offset(  surv_mm/12/1000  ), family=poisson, data=melanoma_10y)
summary(poisson_c)
eform(poisson_c)
melanoma_10y <- mutate(melanoma,
status= ifelse(surv_mm <= 120 & status == 1, 1, 0),
surv_mm = ifelse(surv_mm<=120, surv_mm, 120) # censored everyone after 120 months
)
##(c)-ii.  Hazard rate and Poisson regression
survRate(Surv(surv_mm/12/1000, status == 1) ~ year8594, data=melanoma_10y)
# Calculate by hand the ratio (85-94 to 75-84)
27.778/31.453 # 0.883159
##(c)-iii. Poisson regression
poisson_c <- glm( status == 1 ~ year8594 + offset( log( surv_mm/12/1000  ) ), family=poisson, data=melanoma_10y)
summary(poisson_c)
eform(poisson_c)
source('~/cansurv_r/solutions/q111.R', echo=TRUE)
